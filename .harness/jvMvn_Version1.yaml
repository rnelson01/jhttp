template:
    name: jvMvn
    identifier: jvMvn
    versionLabel: Version1
    type: Stage
    projectIdentifier: tempwf
    orgIdentifier: default
    spec:
        type: CI
        spec:
            cloneCodebase: true
            infrastructure:
                type: KubernetesDirect
                spec:
                    connectorRef: account.gcpsalescidemo
                    namespace: build
            execution:
                steps:
                    - step:
                          type: RestoreCacheGCS
                          name: Restore Cache
                          identifier: Restore_Cache
                          spec:
                              connectorRef: account.GCP
                              bucket: <+pipeline.name>
                              key: <+pipeline.name>
                              archiveFormat: Tar
                    - step:
                          type: Run
                          name: maven-build
                          identifier: mavenbuild
                          spec:
                              connectorRef: account.Harness_Docker_Connector
                              image: maven:3.5.2-jdk-8-alpine
                              command: mvn clean package -DskipTests
                              resources:
                                  limits:
                                      memory: 4G
                                      cpu: "1"
        variables:
            - name: Cache
              type: String
              value: T
            - name: PushGCR
              type: String
              value: T
